/*
 * # i18n library
 *
 * ## locale.js: i18n for Node.js and browser
 * 
 * @author Dmitry A. Chleck <dmitrychleck@gmail.com>
 * @version 1.0.0
 * @url https://github.com/chleck/locale-js
 */var locale=new function(){function i(r,i){var o,a;if(!r.phrase)return"";try{r.n===undefined?o=n[i][r.phrase]||u(r.phrase):(a=t[i](r.n),o=n[i][r.phrase[0]][a])}catch(f){if(r.n===undefined)o=u(r.phrase);else try{a=t[e](r.n),o=u(r.phrase[a])}catch(f){o=u(r.phrase[0])}}return s(o,r.args,r.n)}function s(e,t,n){var r=1,i=e.split("%"),s=[i[0]];if(Array.isArray(t)){var o={};t.unshift("");for(var u in t)o[u]=t[u];t=o}for(var a=1;a<i.length;a++){var f=i[a],l="";switch(f[0]){case undefined:s.push("%"),s.push(i[++a]);continue;case"n":l=n;break;case"s":var c="";f[1]==="("&&(f[2]==="("?f=f.substring(1):(c=f.substr(2,f.indexOf(")")-2),f=f.substring(c.length+2))),c?l=t[c]:l=t[r++]}s.push(l),s.push(f.substring(1))}return s.join("")}function o(e){var t=0,n;while(n=e[t++])if(n=="#"){if(e[t]!="#")break;t++}var r=e.indexOf(" ",t);r<0&&(r=e.length);var i=e.slice(0,t-1),s=e.slice(t,r);return s&&(i+="#"+s),i}function u(e){var t=0,n;while(n=e[t++])if(n=="#"){if(e[t]!="#")break;t++}return e.slice(0,t-1).replace(/##/g,"#")}var e,t,n={},r=this;this.init=function(n,r){e=n||"en",t={},t[e]=Function("n","return "+(r||"(n == 1 ? 0 : 1)"))},this.add=function(e,r){n[e]=r,t[e]=Function("n","return "+(r[""]||"(n == 1 ? 0 : 1)"))},this.i18n=function(t){var n=this,r;r=t===undefined?"":t,this.to=function(t){if(t===undefined)return r;t===""&&(t=e||"en"),r=t},this.__=function(){var e,t,n=Array.prototype.slice.call(arguments);e=n.shift()||"",Array.isArray(e)&&(t=n.shift());if(t===undefined)e=o(e);else for(var s in e)e[s]=o(e[s]);if(typeof n[0]=="object"||Array.isArray(n[0]))n=n[0];var u={__i18n:!0,phrase:e,n:t,args:n};return r===null?u:i(u,r)},this.tr=function(e){if(typeof e!="object")return;for(var t in e)e[t].__i18n?e[t]=i(e[t],r):n.tr(e[t])}};var a=new r.i18n;for(var f in a)r[f]=a[f]};typeof exports=="object"&&(exports.locale=locale);